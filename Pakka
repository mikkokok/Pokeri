package pokeri;

import java.util.Collections;
import java.util.LinkedList;

/**
 * @author Mikko Kokkonen, 2014
 * @version 0.1 Pakka luokka jonka sisällä on kortti luokka 
 * Pakka kuvastaa korttipakkaa
 */
public class Pakka {
	private static Pakka instance = null;
	/**
	 * Staattinen enum "Maa" joka sisältää korttien maat
	 */

	// Esiintymämuuttuja

	/**
	 * Dynaaminen Pakka josta kortit jaetaan.
	 */
	private LinkedList<Kortti> valmisPakka = new LinkedList<Kortti>();
	/**
	 * Luokkamuuttuja Staattinen 52 kortin pakka, joka luodaan käännösvaiheessa
	 */
	static private LinkedList<Kortti> staticpakka = new LinkedList<Kortti>(); {
	
		{
			for (int i = 1; i < 14; i++) {			
				staticpakka.add(new Kortti(Maa.HERTTA, Numero.get(i)));
				staticpakka.add(new Kortti(Maa.PATA, Numero.get(i)));
				staticpakka.add(new Kortti(Maa.RISTI, Numero.get(i)));
				staticpakka.add(new Kortti(Maa.RUUTU, Numero.get(i)));		
			}
		}
	};

	// --Staticpakka--

	// Konstruktorit

	/**
	 * Konstruktori jolla luodaan 52 kortin pakkaolio.
	 * 
	 */
	private Pakka() {
		for (int i = 0; i < 52; i++) {
			valmisPakka.add(staticpakka.get(i));
		}
		Collections.shuffle(valmisPakka);
		System.out.println("Pakan koko " +valmisPakka.size());
		//System.err.println(valmisPakka);
	}

	// Havainnointimetodit

	/**
	 * Metodi jolla palautetaan kortti pakkaan. Alkuehto: Pakka pitää olla
	 * luotuna.
	 * 
	 * @param palautettava
	 */

	public void giveKortti(Kortti palautettava) {
		valmisPakka.addLast(palautettava);
	}

	/**
	 * getKortti metodi antaa pakasta päällimmäisen kortin Alkuehto: Pakka pitää
	 * olla luotuna.
	 * 
	 * @return
	 */
	public Kortti getKortti() {
		return valmisPakka.removeFirst();

	}

	/**
	 * Metodi jolla voidaan lukea pakka.
	 */
	public String toString() {
		return null;

	}

	// Muutosmetodit

	/**
	 * Metodi jolla pakka luetaan dynaamiseen listaan ja sekoitetaan
	 * 
	 */
	public static Pakka teePakka() {
		if ( instance == null ) {
			instance = new Pakka();
		}
		return instance;
	}
	/**
	 * Metodi jolla voidaan pyytää tietty kortti pakasta. Alkuehto: Pakka pitää
	 * olla luotuna.
	 * 
	 * @param numero
	 * @param maa
	 * @return
	 */
	public Kortti getTiettyKortti(Numero numero, Maa maa) {
		return null;
	}

	/**
	 * Kortti classi jolla kortit luodaan
	 */
	static public class Kortti {
		private Maa maa;
		private Numero numero;
		// Konstruktorit

		/**
		 * Classin konstruktori
		 * 
		 * @param maa
		 * @param numero
		 */
		public Kortti(Maa maa, Numero numero) {
			this.maa = maa;
			this.numero = numero;
		}
		public String toString() {
			return this.maa.toString()+" "+this.numero.toString();
		}

		// Luokkamuuttujat

	} // Kortti class
} // Pakka class
